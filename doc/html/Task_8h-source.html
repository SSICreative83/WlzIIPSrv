<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>iipsrv: Task.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>Task.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">    IIP Generic Task Class</span>
00003 <span class="comment"></span>
00004 <span class="comment">    Copyright (C) 2006 Ruven Pillay.</span>
00005 <span class="comment"></span>
00006 <span class="comment">    This program is free software; you can redistribute it and/or modify</span>
00007 <span class="comment">    it under the terms of the GNU General Public License as published by</span>
00008 <span class="comment">    the Free Software Foundation; either version 2 of the License, or</span>
00009 <span class="comment">    (at your option) any later version.</span>
00010 <span class="comment"></span>
00011 <span class="comment">    This program is distributed in the hope that it will be useful,</span>
00012 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00013 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00014 <span class="comment">    GNU General Public License for more details.</span>
00015 <span class="comment"></span>
00016 <span class="comment">    You should have received a copy of the GNU General Public License</span>
00017 <span class="comment">    along with this program; if not, write to the Free Software</span>
00018 <span class="comment">    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00019 <span class="comment">*/</span>
00020 
00021 
00022 <span class="preprocessor">#ifndef _TASK_H</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#define _TASK_H</span>
00024 <span class="preprocessor"></span>
00025 
00026 
00027 <span class="preprocessor">#include &lt;string&gt;</span>
00028 <span class="preprocessor">#include &lt;fstream&gt;</span>
00029 <span class="preprocessor">#include "IIPImage.h"</span>
00030 <span class="preprocessor">#include "IIPResponse.h"</span>
00031 <span class="preprocessor">#include "JPEGCompressor.h"</span>
00032 <span class="preprocessor">#include "View.h"</span>
00033 <span class="preprocessor">#include "TileManager.h"</span>
00034 <span class="preprocessor">#include "Timer.h"</span>
00035 <span class="preprocessor">#include "Writer.h"</span>
00036 <span class="preprocessor">#include "Cache.h"</span>
00037 
00038 
00039 <span class="comment">// Use the hashmap extensions if we are using &gt;= gcc 3.1</span>
00040 <span class="preprocessor">#ifdef __GNUC__</span>
00041 <span class="preprocessor"></span>
00042 <span class="preprocessor">#if (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 1) || (__GNUC__ &gt;= 4)</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define USE_HASHMAP 1</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00045 <span class="preprocessor"></span>
00046 <span class="comment">// And the high performance memory pool allocator if &gt;= gcc 3.4</span>
00047 <span class="preprocessor">#if (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 4) || (__GNUC__ &gt;= 4)</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define USE_POOL_ALLOCATOR 1</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00050 <span class="preprocessor"></span>
00051 <span class="preprocessor">#endif</span>
00052 <span class="preprocessor"></span>
00053 
00054 
00055 <span class="preprocessor">#ifdef USE_HASHMAP</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#include &lt;ext/hash_map&gt;</span>
00057 
00058 <span class="preprocessor">#ifdef USE_POOL_ALLOCATOR</span>
00059 <span class="preprocessor"></span><span class="preprocessor">#include &lt;ext/pool_allocator.h&gt;</span>
00060 <span class="keyword">typedef</span> __gnu_cxx::hash_map &lt; <span class="keyword">const</span> std::string, <a class="code" href="classIIPImage.html">IIPImage</a>,
00061                               __gnu_cxx::hash&lt; const std::string &gt;,
00062                               std::equal_to&lt; const std::string &gt;,
00063                               __gnu_cxx::__pool_alloc&lt; std::pair&lt;const std::string,IIPImage&gt; &gt;
00064                               &gt; imageCacheMapType;
00065 <span class="preprocessor">#else</span>
00066 <span class="preprocessor"></span><span class="keyword">typedef</span> __gnu_cxx::hash_map &lt;const std::string,IIPImage&gt; imageCacheMapType;
00067 <span class="preprocessor">#endif</span>
00068 <span class="preprocessor"></span>
00069 <span class="preprocessor">#else</span>
00070 <span class="preprocessor"></span><span class="keyword">typedef</span> std::map&lt;const std::string,IIPImage&gt; imageCacheMapType;
00071 <span class="preprocessor">#endif</span>
00072 <span class="preprocessor"></span>
00073 
00074 
00075 
<a name="l00077"></a><a class="code" href="structSession.html">00077</a> <span class="keyword">struct </span><a class="code" href="structSession.html">Session</a> {
00078   IIPImage **image;
00079   <a class="code" href="classJPEGCompressor.html">JPEGCompressor</a>* jpeg;
00080   <a class="code" href="classView.html">View</a>* view;
00081   <a class="code" href="classIIPResponse.html">IIPResponse</a>* response;
00082   <span class="keywordtype">int</span> loglevel;
00083   std::ofstream* logfile;
00084 
00085   imageCacheMapType *imageCache;
00086   <a class="code" href="classCache.html">Cache</a>* tileCache;
00087 
00088 <span class="preprocessor">#ifdef DEBUG</span>
00089 <span class="preprocessor"></span>  <a class="code" href="classFileWriter.html">FileWriter</a>* out;
00090 <span class="preprocessor">#else</span>
00091 <span class="preprocessor"></span>  <a class="code" href="classFCGIWriter.html">FCGIWriter</a>* out;
00092 <span class="preprocessor">#endif</span>
00093 <span class="preprocessor"></span>
00094 };
00095 
00096 
00097 
00098 
<a name="l00100"></a><a class="code" href="classTask.html">00100</a> <span class="keyword">class </span><a class="code" href="classTask.html">Task</a> {
00101 
00102  <span class="keyword">protected</span>:
00103 
<a name="l00105"></a><a class="code" href="classTask.html#p0">00105</a>   <a class="code" href="classTimer.html">Timer</a> command_timer;
00106 
<a name="l00108"></a><a class="code" href="classTask.html#p1">00108</a>   <a class="code" href="structSession.html">Session</a>* session;
00109 
<a name="l00111"></a><a class="code" href="classTask.html#p2">00111</a>   std::string argument;
00112 
00113 
00114  <span class="keyword">public</span>:
00115 
<a name="l00117"></a><a class="code" href="classTask.html#a0">00117</a>   <span class="keyword">virtual</span> ~<a class="code" href="classTask.html">Task</a>() {;};   
00118 
<a name="l00120"></a><a class="code" href="classTask.html#a1">00120</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> run( <a class="code" href="structSession.html">Session</a>* session, std::string argument ) {;};
00121 
00123 
00124   <span class="keyword">static</span> <a class="code" href="classTask.html">Task</a>* factory( std::string type );
00125 
00126 
00128   <span class="keywordtype">void</span> checkImage();
00129 
00130 };
00131 
00132 
00133 
00134 
<a name="l00136"></a><a class="code" href="classOBJ.html">00136</a> <span class="keyword">class </span><a class="code" href="classOBJ.html">OBJ</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00137 
00138  <span class="keyword">public</span>:
00139 
00140   <span class="keywordtype">void</span> <a class="code" href="classOBJ.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00141 
00142   <span class="keywordtype">void</span> iip();
00143   <span class="keywordtype">void</span> iip_server();
00144   <span class="keywordtype">void</span> max_size();
00145   <span class="keywordtype">void</span> resolution_number();
00146   <span class="keywordtype">void</span> colorspace( std::string arg );
00147   <span class="keywordtype">void</span> tile_size();
00148   <span class="keywordtype">void</span> horizontal_views();
00149   <span class="keywordtype">void</span> vertical_views();
00150   <span class="keywordtype">void</span> metadata( std::string field );
00151 
00152 };
00153 
00154 
<a name="l00156"></a><a class="code" href="classQLT.html">00156</a> <span class="keyword">class </span><a class="code" href="classQLT.html">QLT</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00157  <span class="keyword">public</span>:
00158   <span class="keywordtype">void</span> <a class="code" href="classQLT.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00159 };
00160 
00161 
<a name="l00163"></a><a class="code" href="classSDS.html">00163</a> <span class="keyword">class </span><a class="code" href="classSDS.html">SDS</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00164  <span class="keyword">public</span>:
00165   <span class="keywordtype">void</span> <a class="code" href="classSDS.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00166 };
00167 
00168 
<a name="l00170"></a><a class="code" href="classCNT.html">00170</a> <span class="keyword">class </span><a class="code" href="classCNT.html">CNT</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00171  <span class="keyword">public</span>:
00172   <span class="keywordtype">void</span> <a class="code" href="classCNT.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00173 };
00174 
00175 
<a name="l00177"></a><a class="code" href="classWID.html">00177</a> <span class="keyword">class </span><a class="code" href="classWID.html">WID</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00178  <span class="keyword">public</span>:
00179   <span class="keywordtype">void</span> <a class="code" href="classWID.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00180 };
00181 
00182 
<a name="l00184"></a><a class="code" href="classHEI.html">00184</a> <span class="keyword">class </span><a class="code" href="classHEI.html">HEI</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00185  <span class="keyword">public</span>:
00186   <span class="keywordtype">void</span> <a class="code" href="classHEI.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00187 };
00188 
00189 
<a name="l00191"></a><a class="code" href="classRGN.html">00191</a> <span class="keyword">class </span><a class="code" href="classRGN.html">RGN</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00192  <span class="keyword">public</span>:
00193   <span class="keywordtype">void</span> <a class="code" href="classRGN.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00194 };
00195 
00196 
<a name="l00198"></a><a class="code" href="classFIF.html">00198</a> <span class="keyword">class </span><a class="code" href="classFIF.html">FIF</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00199  <span class="keyword">public</span>:
00200   <span class="keywordtype">void</span> <a class="code" href="classFIF.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00201 };
00202 
00203 
<a name="l00205"></a><a class="code" href="classJTL.html">00205</a> <span class="keyword">class </span><a class="code" href="classJTL.html">JTL</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00206  <span class="keyword">public</span>:
00207   <span class="keywordtype">void</span> <a class="code" href="classJTL.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00208 };
00209 
00210 
<a name="l00212"></a><a class="code" href="classJTLS.html">00212</a> <span class="keyword">class </span><a class="code" href="classJTLS.html">JTLS</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00213  <span class="keyword">public</span>:
00214   <span class="keywordtype">void</span> <a class="code" href="classJTLS.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00215 };
00216 
00217 
<a name="l00219"></a><a class="code" href="classTIL.html">00219</a> <span class="keyword">class </span><a class="code" href="classTIL.html">TIL</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00220  <span class="keyword">public</span>:
00221   <span class="keywordtype">void</span> <a class="code" href="classTIL.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00222 };
00223 
00224 
<a name="l00226"></a><a class="code" href="classCVT.html">00226</a> <span class="keyword">class </span><a class="code" href="classCVT.html">CVT</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00227  <span class="keyword">public</span>:
00228   <span class="keywordtype">void</span> <a class="code" href="classCVT.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00229 };
00230 
00231 
<a name="l00233"></a><a class="code" href="classICC.html">00233</a> <span class="keyword">class </span><a class="code" href="classICC.html">ICC</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00234  <span class="keyword">public</span>:
00235   <span class="keywordtype">void</span> <a class="code" href="classICC.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00236 };
00237 
00238 
<a name="l00240"></a><a class="code" href="classSHD.html">00240</a> <span class="keyword">class </span><a class="code" href="classSHD.html">SHD</a> : <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a> {
00241  <span class="keyword">public</span>:
00242   <span class="keywordtype">void</span> <a class="code" href="classSHD.html#a0">run</a>( <a class="code" href="structSession.html">Session</a>* session, std::string argument );
00243 };
00244 
00245 
00246 
00247 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 13 16:44:13 2006 for iipsrv by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
